<div class="form-container">
  <h2>Create User</h2>

  <form (ngSubmit)="createUser()">
    <div class="form-field">
      <label for="first_name">First Name:</label>
      <input
        type="text"
        id="first_name"
        [(ngModel)]="user.first_name"
        name="first_name"
        required
        placeholder="Enter first name"
      />
    </div>

    <div class="form-field">
      <label for="last_name">Last Name:</label>
      <input
        type="text"
        id="last_name"
        [(ngModel)]="user.last_name"
        name="last_name"
        required
        placeholder="Enter last name"
      />
    </div>

    <div class="form-field">
      <label for="user_name">User Name:</label>
      <input
        type="text"
        id="user_name"
        [(ngModel)]="user.user_name"
        name="user_name"
        required
        placeholder="Enter user name"
      />
      <button type="button" (click)="validateUsername()" class="validate-btn">Validate</button>
      <p *ngIf="usernameMessage" [ngClass]="{'error': isUsernameInvalid, 'success': !isUsernameInvalid}">
        {{ usernameMessage }}
      </p>
      <div *ngIf="isUsernameInvalid && suggestedUsernames.length > 0" class="suggestions">
        <p>Suggested Usernames:</p>
        <ul>
          <li *ngFor="let suggestion of suggestedUsernames">{{ suggestion }}</li>
        </ul>
      </div>
    </div>

    <div class="form-field">
      <label for="email">Email:</label>
      <input
        type="email"
        id="email"
        [(ngModel)]="user.email"
        name="email"
        required
        pattern="[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$"
        placeholder="Enter email"
        #email="ngModel"
      />
      <p *ngIf="email.invalid && email.touched" class="error">
        Please enter a valid email address.
      </p>
    </div>

    <div class="form-field">
      <label for="user_status">User Status:</label>
      <select
        id="user_status"
        [(ngModel)]="user.user_status"
        name="user_status"
        required
      >
        <option *ngFor="let status of userStatusOptions" [value]="status.value">
          {{ status.label }}
        </option>
      </select>
    </div>

    <div class="form-field">
      <label for="department">Department:</label>
      <input
        type="text"
        id="department"
        [(ngModel)]="user.department"
        name="department"
        required
        placeholder="Enter department"
      />
    </div>

    <div class="form-actions">
      <button type="submit" class="btn-primary" [disabled]="isUsernameInvalid">Create User</button>
      <button type="button" class="btn-secondary" (click)="goBack()">Cancel</button>
    </div>
  </form>
</div>
